
# AEDナビゲーション - シーケンス図

## ウェブアプリケーションフロー

```mermaid
sequenceDiagram
    participant クライアント
    participant サーバー
    participant ブラウザ

    クライアント->>サーバー: トップページをリクエスト (HTML/CSS)
    サーバー->>クライアント: HTML/CSSを返す
    クライアント->>ブラウザ: ページをレンダリング

    クライアント->>サーバー: 施設データをリクエスト (CSV)
    サーバー->>クライアント: 施設CSVを返す

    クライアント->>クライアント: 利用可能な施設をフィルタリング

    クライアント->>クライアント: 現在の位置を取得
    クライアント->>クライアント: 最寄りの施設を検索<br/>(上位5候補)

    クライアント->>ブラウザ: 地図と施設情報を表示

    Note over クライアント: ユーザーが次へボタンをクリック
    クライアント->>クライアント: 次の最寄りの施設を取得
    クライアント->>ブラウザ: 地図と施設情報を更新
```

## プロセス概要

1. **初期ロード**: クライアントがHTML/CSSをリクエストし受信
2. **データ取得**: クライアントが施設データを取得 (CSV形式)
3. **クライアント側フィルタリング**: 利用可能な施設が絞り込まれる
4. **位置検出**: 現在の位置を取得し、上位5つの最寄り施設を特定
5. **表示**: 地図と施設情報が表示される
6. **ナビゲーション**: 「次へ」ボタンが残りの候補を循環

